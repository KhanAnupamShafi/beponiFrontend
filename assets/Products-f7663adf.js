import{r as c,f as U,G as F,j as a,a as e,k as M,N as G,S as q,_ as H,d as J,H as P,I as O,J as R}from"./index-8206ae57.js";import{P as K}from"./ProductCard-e15be505.js";import{i as X}from"./discountCalculate-6ac54f3c.js";import{u as W}from"./categoriesApi-c6584898.js";import"./wishListApi-7fd48942.js";const b=(i,d,m)=>{const r=i.split("&");let l=!1;for(let h=0;h<r.length;h++){const o=r[h].split("=");if(o[0]===d){o[1]=m,r[h]=o.join("="),l=!0;break}}return l||r.push(`${d}=${m}`),r.join("&")},E=(i,d,m,r)=>{let l=[...m];if(i)d([...m,{_id:r._id,name:r.name,checked:!0}]),l.push(r);else{const o=m.filter(x=>x._id!==r._id);d(o),l=o}const p=[];return l.forEach(o=>{o.name.length>0&&p.push(o.name)}),p.join(",")},Y=()=>{var $;const[i,d]=c.useState(0),[m,r]=c.useState(0),[l,p]=c.useState([]),[h,o]=c.useState([]),x=U(),f=F().search||"?",y=()=>{window.scrollTo({top:0,behavior:"smooth"})},[g,N]=c.useState([{_id:"",name:""}]);c.useState([{_id:"",name:"",checked:!1}]);const k=[{_id:"1",name:"md"},{_id:"2",name:"lg"},{_id:"3",name:"xl"}],_=[{_id:"1",name:"red"},{_id:"2",name:"green"},{_id:"3",name:"black"},{_id:"4",name:"orange"},{_id:"5",name:"yellow"},{_id:"6",name:"wood"}],{data:w,isLoading:S,isError:I}=W(),v=n=>{n.preventDefault();const t=`${i}-${m}`,s=b(f,"price",t);x(s),y()},j=n=>{const t=b(f,"price",n);x(t),y()},A=()=>{p(Array(k.length).fill(!1)),o(Array(_.length).fill(!1)),d(0),r(0),x("/products")},z=(n,t,s)=>{const u=[...l];u[t]=!l[t],p(u);const C=E(n.target.checked,N,g,s),V=b(f,"size",C);x(V),y()},L=(n,t,s)=>{const u=[...h];u[t]=!h[t],o(u);const C=E(n.target.checked,N,g,s),V=b(f,"color",C);x(V),y()};return a("div",{className:"hidden md:block",children:[a("div",{className:"sm:flex justify-between pb-4 text-[#333] font-bold items-center",children:[e("label",{children:"Filter :"}),e("button",{onClick:A,className:"btn btn-sm btn-ghost text-sky-400 hover:bg-slate-100",children:"Clear All"})]}),a("div",{tabIndex:0,className:"collapse collapse-plus border-r border-base-300 bg-base-100 rounded-sm",children:[e("input",{type:"checkbox",className:"peer"}),e("h3",{className:"collapse-title text-lg font-semibold border-b border-[#eee] px-0",children:e("label",{className:"py-[1rem] text-[1rem] border-b border-[#333]",children:"All Categories"})}),S?e(M,{}):e("ul",{className:"collapse-content",children:($=w==null?void 0:w.result)==null?void 0:$.map(n=>(console.log(location.search.includes(n.title),"location"),e("li",{className:`pt-2.5 transition-colors hover:text-[#ff4949] ${location.search.includes(n._id)?"text-[#ff4949] font-semibold":null}`,children:e(G,{to:b(f,"category",n._id),children:n.title})})))})]}),a("div",{tabIndex:0,className:"collapse collapse-plus border-r border-base-300 bg-base-100 rounded-sm",children:[e("input",{type:"checkbox",className:"peer"}),e("h3",{className:"collapse-title text-lg font-semibold border-b border-[#eee] px-0",children:e("label",{className:"py-[1rem] border-b border-[#333] text-[1rem]",children:"Price"})}),a("ul",{className:"collapse-content cursor-pointer",children:[e("li",{onClick:()=>j("0-200"),className:"pt-2.5 transition-colors hover:text-[#ff4949]",children:e("div",{children:"0.00 - 200"})}),e("li",{className:"pt-2.5 transition-colors hover:text-[#ff4949] cursor-pointer",onClick:()=>j("200-500"),children:e("div",{children:"200 - 500"})}),e("li",{className:"pt-2.5 transition-colors hover:text-[#ff4949] cursor-pointer",onClick:()=>j("500-1000"),children:e("div",{children:"500 - 1000"})}),a("form",{onSubmit:n=>v(n),className:"flex items-center gap-2 my-2.5 text-[#999]",children:[e("input",{type:"number",name:"min_price",className:"p-1.5 text-center items-center w-16 border border-[#999] focus:outline-none h-8",value:i,onChange:n=>d(parseInt(n.target.value)),placeholder:"$min"}),e("span",{className:"delimiter",children:"-"}),e("input",{type:"number",name:"max_price",className:"p-1.5 text-center items-center w-16 border border-[#999] focus:outline-none h-8",value:m,onChange:n=>r(parseInt(n.target.value)),placeholder:"$max"}),e("button",{type:"submit",className:"btn  btn-primary btn-sm rounded-none  ml-2 ",children:"Go"})]})]})]}),a("div",{tabIndex:0,className:"collapse collapse-plus border-r border-base-300 bg-base-100 rounded-sm",children:[e("input",{type:"checkbox",className:"peer"}),e("h3",{className:"collapse-title text-lg font-semibold border-b border-[#eee] px-0",children:e("label",{className:"py-[1rem] border-b border-[#333] text-[1rem]",children:"Size"})}),e("ul",{className:"collapse-content",children:k.map((n,t)=>e("li",{className:"pt-2.5 transition-colors hover:text-[#ff4949] underline",children:a("label",{className:"inline-flex items-center gap-2 mt-2 cursor-pointer ",children:[e("input",{className:"checkbox checkbox-sm rounded-none ",type:"checkbox",checked:l[t],onChange:s=>z(s,t,n),id:n._id})," ",n.name]})},n._id))})]}),a("div",{tabIndex:0,className:"collapse collapse-plus border-r border-base-300 bg-base-100 rounded-sm pb-5",children:[e("input",{type:"checkbox",className:"peer"}),e("h3",{className:"collapse-title text-lg font-semibold border-b border-[#eee] px-0",children:e("label",{className:"py-[1rem] border-b border-[#333] text-[1rem]",children:"Color"})}),e("ul",{className:"collapse-content",children:_.map((n,t)=>e("li",{className:"pt-2.5 transition-colors hover:text-[#ff4949] underline",children:a("label",{className:"inline-flex items-center gap-2 mt-2 cursor-pointer",children:[e("input",{id:n._id,type:"checkbox",checked:h[t],className:"checkbox checkbox-sm rounded-none",onChange:s=>{L(s,t,n)}})," ",n.name]})},n._id))})]})]})};var Q=c.forwardRef(function(i,d){var m={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return c.createElement(q,H({iconAttrs:m,iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},i,{ref:d}),c.createElement("g",{"data-name":"Layer 2"},c.createElement("g",{"data-name":"menu-2"},c.createElement("circle",{cx:4,cy:12,r:1}),c.createElement("rect",{width:14,height:2,x:7,y:11,rx:.94,ry:.94}),c.createElement("rect",{width:18,height:2,x:3,y:16,rx:.94,ry:.94}),c.createElement("rect",{width:18,height:2,x:3,y:6,rx:.94,ry:.94}))))});Q.displayName="Menu2";const T=[{_id:"1",name:"md"},{_id:"2",name:"lg"},{_id:"3",name:"xl"}],B=[{_id:"1",name:"red"},{_id:"2",name:"green"},{_id:"3",name:"black"},{_id:"4",name:"orange"},{_id:"5",name:"yellow"},{_id:"6",name:"wood"}];function Z(){var n;const{filterDrawer:i}=J(t=>t.modal);console.log("filterDrawer",i);const d=P(),m=()=>{d(R(!1))},[r,l]=c.useState(0),[p,h]=c.useState(0),[o,x]=c.useState([]),[f,y]=c.useState([]),g=U(),N=F().search||"?",k=()=>{window.scrollTo({top:0,behavior:"smooth"})},[_,w]=c.useState([{_id:"",name:""}]);c.useState([{_id:"",name:"",checked:!1}]);const{data:S,isLoading:I,isError:v}=W(),j=t=>{t.preventDefault();const s=`${r}-${p}`,u=b(N,"price",s);g(u),k()},A=t=>{const s=b(N,"price",t);g(s),k()},z=()=>{x(Array(T.length).fill(!1)),y(Array(B.length).fill(!1)),l(0),h(0),g("/products")},L=(t,s,u)=>{const C=[...o];C[s]=!o[s],x(C);const V=E(t.target.checked,w,_,u),D=b(N,"size",V);g(D),k()},$=(t,s,u)=>{const C=[...f];C[s]=!f[s],y(C);const V=E(t.target.checked,w,_,u),D=b(N,"color",V);g(D),k()};return a("div",{className:"flex items-end justify-end px-4 pb-6 w-full",children:[e("div",{className:`z-30 right-0 fixed top-0 h-screen overflow-scroll bg-white w-full max-w-[384px] shadow-2xl transition-transform duration-300 delay-150 ${i?"translate-x-0":"translate-x-[384px]"}`,children:a("div",{className:"menu p-7 bg-base-100 text-base-content",children:[a("div",{className:"cart-header flex items-center justify-between mb-4",children:[e("span",{className:"font-bold text-lg",children:"Filter"}),a("button",{onClick:m,className:"flex items-center",children:["Close",e("span",{className:"ml-1.5",children:e(O,{size:18})})]})]}),a("div",{className:"pb-5 border-t",children:[e("div",{className:"flex justify-between pb-4 text-[#333] font-bold items-center",children:e("button",{onClick:z,className:"btn btn-sm btn-ghost text-sky-400 hover:bg-slate-100 px-0",children:"Clear All"})}),a("div",{tabIndex:0,className:"collapse collapse-plus bg-base-100 rounded-sm",children:[e("input",{type:"checkbox",className:"peer"}),e("h3",{className:"collapse-title text-lg font-semibold border-b border-[#eee] px-0",children:e("label",{className:"py-[1rem] text-[1rem] border-b border-[#333]",children:"All Categories"})}),I?e(M,{}):e("ul",{className:"collapse-content",children:(n=S==null?void 0:S.result)==null?void 0:n.map(t=>(console.log(location.search.includes(t.title),"location"),e("li",{className:`pt-2.5 transition-colors hover:text-[#ff4949] ${location.search.includes(t._id)?"text-[#ff4949] font-semibold":null}`,children:e(G,{className:`bg-white text-black ${location.search.includes(t._id)?"text-[#ff4949] font-semibold":null}`,to:b(N,"category",t._id),children:t.title})})))})]}),a("div",{tabIndex:0,className:"collapse collapse-plus bg-base-100 rounded-sm",children:[e("input",{type:"checkbox",className:"peer"}),e("h3",{className:"collapse-title text-lg font-semibold border-b border-[#eee] px-0",children:e("label",{className:"py-[1rem] border-b border-[#333] text-[1rem]",children:"Price"})}),a("ul",{className:"collapse-content cursor-pointer",children:[e("li",{onClick:()=>A("0-200"),className:"pt-2.5 transition-colors hover:text-[#ff4949]",children:e("div",{children:"0.00 - 200"})}),e("li",{className:"pt-2.5 transition-colors hover:text-[#ff4949] cursor-pointer",onClick:()=>A("200-500"),children:e("div",{children:"200 - 500"})}),e("li",{className:"pt-2.5 transition-colors hover:text-[#ff4949] cursor-pointer",onClick:()=>A("500-1000"),children:e("div",{children:"500 - 1000"})}),a("form",{onSubmit:t=>j(t),className:"flex items-center gap-2 my-2.5 text-[#999]",children:[e("input",{type:"number",name:"min_price",className:"p-1.5 text-center items-center w-16 border border-[#999] focus:outline-none h-8",value:r,onChange:t=>l(parseInt(t.target.value)),placeholder:"$min"}),e("span",{className:"delimiter",children:"-"}),e("input",{type:"number",name:"max_price",className:"p-1.5 text-center items-center w-16 border border-[#999] focus:outline-none h-8",value:p,onChange:t=>h(parseInt(t.target.value)),placeholder:"$max"}),e("button",{type:"submit",className:"btn  btn-primary btn-sm rounded-none  ml-2 ",children:"Go"})]})]})]}),a("div",{tabIndex:0,className:"collapse collapse-plus  bg-base-100 rounded-sm",children:[e("input",{type:"checkbox",className:"peer"}),e("h3",{className:"collapse-title text-lg font-semibold border-b border-[#eee] px-0",children:e("label",{className:"py-[1rem] border-b border-[#333] text-[1rem]",children:"Size"})}),e("ul",{className:"collapse-content",children:T.map((t,s)=>e("li",{className:"pt-2.5 transition-colors hover:text-[#ff4949] underline",children:a("label",{className:"inline-flex items-center gap-2 mt-2 cursor-pointer ",children:[e("input",{className:"checkbox checkbox-sm rounded-none ",type:"checkbox",checked:o[s],onChange:u=>L(u,s,t),id:t._id})," ",t.name]})},t._id))})]}),a("div",{tabIndex:0,className:"collapse collapse-plus bg-base-100 rounded-sm pb-5",children:[e("input",{type:"checkbox",className:"peer"}),e("h3",{className:"collapse-title text-lg font-semibold border-b border-[#eee] px-0",children:e("label",{className:"py-[1rem] border-b border-[#333] text-[1rem]",children:"Color"})}),e("ul",{className:"collapse-content",children:B.map((t,s)=>e("li",{className:"pt-2.5 transition-colors hover:text-[#ff4949] underline",children:a("label",{className:"inline-flex items-center gap-2 mt-2 cursor-pointer",children:[e("input",{id:t._id,type:"checkbox",checked:f[s],className:"checkbox checkbox-sm rounded-none",onChange:u=>{$(u,s,t)}})," ",t.name]})},t._id))})]})]}),e("div",{className:"cart-action flex"})]})}),i&&e("div",{onClick:m,className:"z-20 fixed top-0 left-0 w-screen h-screen bg-gray-900 bg-opacity-50"})]})}const ee=[{_id:"1",name:"Default sorting",value:""},{_id:"2",name:"Sort by latest",value:"newest"},{_id:"3",name:"Sort price law to high",value:"price-asc"},{_id:"4",name:"Sort price high to law",value:"price-desc"}],te=[{_id:"1",name:"Show 12",value:12},{_id:"2",name:"Show 24",value:24},{_id:"3",name:"Show 36",value:36},{_id:"4",name:"Show 50",value:50}],le=()=>{const i=P(),d=U();return a("nav",{className:"block md:flex justify-between flex-wrap items-center pb-2.5",children:[e(Z,{}),a("div",{className:"toolbox-left flex items-center flex-wrap gap-5",children:[a("button",{className:"btn btn-info btn-outline rounded-md btn-sm block md:hidden",onClick:()=>{i(R(!0))},children:[e(Q,{size:24,className:"mr-2"}),e("span",{children:"Filters"})]}),a("div",{className:"flex gap-5 text-[#333] font-bold items-center",children:[e("label",{className:"mr-2 block",children:"Sort By :"}),e("select",{name:"orderby",className:"form-control select select-bordered rounded-sm select-sm w-[10rem] focus:outline-none max-w-none border border-[#d7d7d7]",onChange:r=>{const l=b(location.search,"sort",r.target.value);d(l)},children:ee.map(r=>e("option",{value:r.value,defaultValue:"selected",children:r.name},r._id))})]})]}),a("div",{className:"toolbox-right mt-5 md:mt-0",children:[e("div",{className:"toolbox-item toolbox-show select-box",children:e("select",{name:"count",className:"form-control select select-bordered rounded-sm select-sm w-[6.5rem] focus:outline-none max-w-none border border-[#d7d7d7]",onChange:r=>{const l=b(location.search,"limit",r.target.value);d(l)},children:te.map(r=>e("option",{value:r.value,defaultValue:"selected",children:r.name},r._id))})}),a("div",{className:"toolbox-item toolbox-layout",children:[e("a",{href:"shop-banner-sidebar.html",className:"icon-mode-grid btn-layout active",children:e("i",{className:"w-icon-grid"})}),e("a",{href:"shop-list.html",className:"icon-mode-list btn-layout",children:e("i",{className:"w-icon-list"})})]})]})]})};function ce(){var f,y,g,N,k,_,w,S,I;const i=F(),[d,m]=c.useState(1),r=U(),{data:l,isLoading:p,isError:h}=X(i.search);console.log(p,"searchLoading");let o=null;p&&(o=e(M,{})),!p&&h&&(o=e("p",{className:"text-center text-red-400 md:text-xl",children:"There was something wrong!"})),!p&&!h&&((y=(f=l==null?void 0:l.result)==null?void 0:f.data)==null?void 0:y.length)===0&&(o=a("div",{className:"text-center",children:[e("p",{className:"text-xl font-bold",children:"Search No Results"}),e("p",{children:"We're sorry. We cannot find any matches for your search term."})]})),!p&&!h&&((N=(g=l==null?void 0:l.result)==null?void 0:g.data)==null?void 0:N.length)>0&&(o=(_=(k=l==null?void 0:l.result)==null?void 0:k.data)==null?void 0:_.map(v=>e(K,{product:v},v._id)));let x=l!=null&&l.result?Array.from({length:(w=l==null?void 0:l.result)==null?void 0:w.totalPageNumber},(v,j)=>j+1):[];return e("div",{className:"container",children:a("div",{className:"grid grid-cols-12 gap-4",children:[e("aside",{className:"col-span-12 md:col-span-3 px-4",children:e(Y,{})}),a("div",{className:"col-span-12 md:col-span-9 ",children:[e(le,{}),a("div",{children:[e("div",{className:`${!p&&!h&&((I=(S=l==null?void 0:l.result)==null?void 0:S.data)==null?void 0:I.length)===0?"flex justify-center items-center h-48":"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-y-10"}  gap-4 mb-4`,children:o}),e("div",{className:"flex justify-end my-2",children:e("div",{className:"btn-group ",children:x.map(v=>e("button",{onClick:()=>{m(v),r(b(i.search,"page",v.toString()))},className:`btn btn-sm btn-outline ${d===v?"btn-active btn-error":""}`,children:v}))})})]})]})]})})}export{ce as default};
